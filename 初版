<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>歐洲博物館攻略</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>歐洲博物館攻略</title>
    <!-- 引入外部 CSS -->
    <link rel="stylesheet" href="../css/style.css" />

    <link rel="icon" href="../icon/museum.png" />
  </head>
  <body>
    <!-- 漢堡選單 (Offcanvas) -->
    <nav class="navbar navbar-dark top-navbar">
      <!-- 網站標題 -->
      <a class="navbar-brand mx-auto" href="#">歐洲博物館攻略</a>

      <i class="bi bi-arrow-left-circle"></i>

      <div class="container-fluid">
        <!-- 漢堡按鈕放左邊 -->
        <button
          class="navbar-toggler me-2"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasMenu"
          aria-controls="offcanvasMenu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div class ="ms-auto d-flex gap-2">
      <a class="btn btn-outline-light " id="loginBtn" href="log.html">登入</a>
      <a class="btn btn-outline-light " id="loginBtn" href="userfavorite.html">用戶</a>
      </div>
    </nav>

    <!-- 側邊滑出的選單 -->
    <div
      class="offcanvas offcanvas-start text-bg-dark"
      tabindex="-1"
      id="offcanvasMenu"
      aria-labelledby="offcanvasMenuLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasMenuLabel">探索區域</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>

      <form class="form-inline my-2 my-lg-0">
        <input
          class="form-control mr-sm-2 search-input"
          type="search"
          placeholder="Search"
          aria-label="Search"
        />
        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">
          Search
        </button>
      </form>
      <div class="offcanvas-body">
        <ul class="navbar-nav">
          <!-- 西歐 -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="WesternEuropeDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              西歐
            </a>
            <ul
              class="dropdown-menu dropdown-menu-dark"
              id="WesternEuropeMenu"
            ></ul>
          </li>

          <!-- 南歐 -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="SouthernEuropeDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              南歐
            </a>
            <ul
              class="dropdown-menu dropdown-menu-dark"
              id="SouthernEuropeMenu"
            ></ul>
          </li>

          <!-- 東歐 -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="EasternEuropeDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              東歐
            </a>
            <ul
              class="dropdown-menu dropdown-menu-dark"
              id="EasternEuropeMenu"
            ></ul>
          </li>

          <!-- 北歐 -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="NorthernEuropeDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              北歐
            </a>
            <ul
              class="dropdown-menu dropdown-menu-dark"
              id="NorthernEuropeMenu"
            ></ul>
          </li>

      

         
          </li>
        </ul>
      </div>
    </div>

    <!-- Carousel 輪播圖 -->
    <div class="container mt-4">
      <div
        id="carouselExample"
        class="carousel slide mb-4"
        data-bs-ride="carousel"
      >
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              src="../img/El_jardín_de_las_Delicias,_de_El_Bosco.jpg"
              class="d-block w-100"
              alt="Slide 1"
            />
          </div>
          <div class="carousel-item">
            <img
              src="../img/Nascita di Venere.jpg"
              class="d-block w-100"
              alt="Slide 2"
            />
          </div>
          <div class="carousel-item">
            <img
              src="../img/Creación_de_Adán_(Miguel_Ángel).jpg"
              class="d-block w-100"
              alt="Slide 3"
            />
          </div>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- API 綁定 -->
    <script>
      // 載入國家
      function loadCountries(region, menuId) {
        fetch(
          `http://euroexplorer.com/api/api.php?action=getCountries&region=${encodeURIComponent(
            region
          )}`
        )
          .then((res) => res.json())
          .then((data) => {
            const menu = document.getElementById(menuId);
            menu.innerHTML = "";
            if (data.data) {
              data.data.forEach((country) => {
                const li = document.createElement("li");
                let link = "#"; // 預設不跳轉

                if (country.name_zh === "荷蘭") {
                  link = "Netherlands.html";
                } else if (country.name_zh === "法國") {
                  link = "France.html";
                }

                li.innerHTML = `<a class="dropdown-item" href="${link}">${country.name_zh}</a>`;
                menu.appendChild(li);
              });
            }
          })
          .catch((err) => {
            console.error("載入失敗", err);
          });
      }

      let loggedIn = localStorage.getItem("loggedIn")==="true";
  const loginBtn = document.getElementById("loginBtn");
  if(loggedIn){
    loginBtn.textContent="登出";
    loginBtn.href="#";
    loginBtn.onclick = ()=>{
      localStorage.removeItem("loggedIn");
      localStorage.removeItem("username");
      alert("已登出！");
      window.location.reload();
    };
  }

      // 初始化
      loadCountries("Western Europe", "WesternEuropeMenu");
      loadCountries("Southern Europe", "SouthernEuropeMenu");
      loadCountries("Eastern Europe", "EasternEuropeMenu");
      loadCountries("Northern Europe", "NorthernEuropeMenu");
    </script>
  </body>
</html>
